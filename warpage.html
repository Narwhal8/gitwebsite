<!DOCTYPE html>

<head>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <script src="./warabi.js" type="application/javascript"></script>
    <script src="./abi.js" type="application/javascript"></script>
    <script src="./itemvalue.js" type="application/javascript"></script>
    <script src="./excelIntegration.js" type="application/javascript"></script>

    <script>
        const waraddress = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";

        async function selectAction(_value) {
            const provider = new ethers.providers.Web3Provider(window.ethereum)


            const signer = provider.getSigner()
            NFTcontract = new ethers.Contract(waraddress, abi, provider)
            myAddress = await signer.getAddress()

            hideAll();
            switch (_value) {
                case "2":
                    document.getElementById("TroopAdder").style.display = "block";
                    break;
                case "3":
                    document.getElementById("MercAdder").style.display = "block";
                    break;
                case "4":
                    document.getElementById("TroopRemoval").style.display = "block";
                    break;
                case "5":
                    document.getElementById("QuestSelector").style.display = "inline";
                    document.getElementById("QuestSelectorText").style.display = "block";
                    break;
            }

            console.log("test");
        }
        async function submitTX(_value) {
            const provider = new ethers.providers.Web3Provider(window.ethereum)


            const signer = provider.getSigner()
            NFTcontract = new ethers.Contract(waraddress, abi, provider)
            myAddress = await signer.getAddress()

            var _armyData = await NFTcontract.currentArmy(myAddress);

            _value = "1";
            switch (_value) {
                case "1":
                    document.getElementById("TroopCount").style.display = "block";

                    if (document.getElementById("Frontline1").textContent != "Frontline 1:") { document.getElementById("Frontline1").textContent = "Frontline 1:" }
                    document.getElementById("Frontline1").textContent += "Unit Type: ";
                    document.getElementById("Frontline1").textContent += itemName(_armyData[3][0]);
                    document.getElementById("Frontline1").textContent += "Amount: ";
                    document.getElementById("Frontline1").textContent += _armyData[2][0];

                    document.getElementById("Frontline1").textContent += "Unit Type: ";
                    document.getElementById("Frontline1").textContent += itemName(_armyData[3][5]);
                    document.getElementById("Frontline1").textContent += "Amount: ";
                    document.getElementById("Frontline1").textContent += _armyData[2][1];

                    document.getElementById("Frontline1").textContent += "Unit Type: ";
                    document.getElementById("Frontline1").textContent += itemName(_armyData[3][10]);
                    document.getElementById("Frontline1").textContent += "Amount: ";
                    document.getElementById("Frontline1").textContent += _armyData[2][2];



                    if (document.getElementById("Frontline2").textContent != "Frontline 2:") { document.getElementById("Frontline2").textContent = "Frontline 2:" }
                    document.getElementById("Frontline2").textContent += "Unit Type: ";
                    document.getElementById("Frontline2").textContent += itemName(_armyData[3][15]);
                    document.getElementById("Frontline2").textContent += "Amount: ";
                    document.getElementById("Frontline2").textContent += _armyData[2][3];

                    document.getElementById("Frontline2").textContent += "Unit Type: ";
                    document.getElementById("Frontline2").textContent += itemName(_armyData[3][20]);
                    document.getElementById("Frontline2").textContent += "Amount: ";
                    document.getElementById("Frontline2").textContent += _armyData[2][4];

                    document.getElementById("Frontline2").textContent += "Unit Type: ";
                    document.getElementById("Frontline2").textContent += itemName(_armyData[3][25]);
                    document.getElementById("Frontline2").textContent += "Amount: ";
                    document.getElementById("Frontline2").textContent += _armyData[2][5];


                    if (document.getElementById("Ranged").textContent != "Ranged:") { document.getElementById("Ranged").textContent = "Ranged:" }
                    document.getElementById("Ranged").textContent += "Unit Type: ";
                    document.getElementById("Ranged").textContent += itemName(_armyData[3][30]);
                    document.getElementById("Ranged").textContent += "Amount: ";
                    document.getElementById("Ranged").textContent += _armyData[2][6];

                    document.getElementById("Ranged").textContent += "Unit Type: ";
                    document.getElementById("Ranged").textContent += itemName(_armyData[3][35]);
                    document.getElementById("Ranged").textContent += "Amount: ";
                    document.getElementById("Ranged").textContent += _armyData[2][7];

                    document.getElementById("Ranged").textContent += "Unit Type: ";
                    document.getElementById("Ranged").textContent += itemName(_armyData[3][40]);
                    document.getElementById("Ranged").textContent += "Amount: ";
                    document.getElementById("Ranged").textContent += _armyData[2][8];


                    if (document.getElementById("Skirmishers").textContent != "Skirmishers:") { document.getElementById("Skirmishers").textContent = "Skirmishers:" }
                    document.getElementById("Skirmishers").textContent += "Unit Type: ";
                    document.getElementById("Skirmishers").textContent += itemName(_armyData[3][45]);
                    document.getElementById("Skirmishers").textContent += "Amount: ";
                    document.getElementById("Skirmishers").textContent += _armyData[2][9];

                    document.getElementById("Skirmishers").textContent += "Unit Type: ";
                    document.getElementById("Skirmishers").textContent += itemName(_armyData[3][50]);
                    document.getElementById("Skirmishers").textContent += "Amount: ";
                    document.getElementById("Skirmishers").textContent += _armyData[2][10];

                    document.getElementById("Skirmishers").textContent += "Unit Type: ";
                    document.getElementById("Skirmishers").textContent += itemName(_armyData[3][55]);
                    document.getElementById("Skirmishers").textContent += "Amount: ";
                    document.getElementById("Skirmishers").textContent += _armyData[2][11];
                    break;
            }

            console.log("web submit script TX completed");
        }
        function questText(_value) {

            document.getElementById("QuestDescriptionText").style.display = "block";

            switch (_value) {
                case "1":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 20 Bandits";
                    break;
                case "2":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 50 Peasent Levies";
                    break;
                case "3":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 50 Peasent Levies, 50 Veteran Peasent Levies, 50 Peasent Bowman";
                    break;
                case "4":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 100 Levy Spearmen, 100 Peasent Levies, 25 Veteran Mountain Levies";
                    break;
                case "5":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 100 Levy Spearmen, 100 Mercenary Swordsmen, 100 Levy Archers, 50 Mounted Levies";
                    break;
                case "6":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 200 Veteran Levy Spearmen, 400 Levy Axemen, 50 Free Lancees, 200 Levy Archers, 50 Horse Archers, 100 Veteran Levy Axemen";
                    break;
                case "7":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 400 Mercenary Macemen, 500 Pikemen, 200 Veteran Mercenary Swordsmen, 300 Huntsmen, 50 Knights";
                    break;
                case "8":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 1000 Veteran Mercenary Axemen, 1000 Veteran Mercenary Swordsmen, 2000 Pikemen, 500 Veteran Horse Archers, 1000 Horse Archers, 300 Mounted Palace Guards";
                    break;
                case "9":
                    document.getElementById("QuestDescriptionText").textContent = "WIP";
                    break;
                case "10":
                    document.getElementById("QuestDescriptionText").textContent = "Enemies: 6000 Palace Guards, 2500 Mounted Palace Guards, 2000 Palace Horse Archers, 2000 Golden Slingers, 500 Imperial Flamers, 500 War Elephants";
                    break;
            }
        }
        function hideAll() {
            document.getElementById("TroopAdder").style.display = "none";
            document.getElementById("MercAdder").style.display = "none";
            document.getElementById("TroopRemoval").style.display = "none";
        }
    </script>
</head>

<body>

    <MainSelector>
        <text>What would you like to do?</text>
        <select class="Dropdown" id="actionSelector" onclick="selectAction(this.value)">
            <option value="0"></option>
            <option value="1">Check Your Army</option>
            <option value="2">Add Soliders To Army</option>
            <option value="3">Add Mercenaries To Army</option>
            <option value="4">Remove Troop From Army</option>
            <option value="5">Start Quest</option>
            <option value="6">Promote Solider</option>

        </select>
        <ArmyViewer id="TroopCount" class="InvisableOnStart">
            <text id="Frontline1">Frontline 1:</text>
            <br>
            <text id="Frontline2">Frontline 2:</text>
            <br>
            <text id="Ranged">Ranged Units:</text>
            <br>
            <text id="Skirmishers">Skirmish Line:</text>

        </ArmyViewer>
        <AddTroops id="TroopAdder" class="InvisableOnStart">
            <input class="NumericInput">Which Slot would you like this troop to go into?</input>
            <br>
            <select class="Dropdown" id="Trooplist">
                What Troop would you like to add?
                <option value="-1"></option>
                <option value="10001">T1_Spearman</option>
                <option value="10002">T2_Spearman</option>
                <option value="10003">T3_Spearman</option>
                <option value="10004">T4_Spearman</option>
                <option value="10005">T5_Spearman</option>
                <option value="10006">T6_Spearman</option>
                <option value="10007">T7_Spearman</option>
                <option value="10008">T8_Spearman</option>
                <option value="10011">T1_Swordman</option>
                <option value="10012">T2_Swordman</option>
                <option value="10013">T3_Swordman</option>
                <option value="10014">T4_Swordman</option>
                <option value="10015">T5_Swordman</option>
                <option value="10016">T6_Swordman</option>
                <option value="10017">T7_Swordman</option>
                <option value="10018">T8_Swordman</option>
                <option value="10021">T1_Axeman</option>
                <option value="10022">T2_Axeman</option>
                <option value="10023">T3_Axeman</option>
                <option value="10024">T4_Axeman</option>
                <option value="10025">T5_Axeman</option>
                <option value="10026">T6_Axeman</option>
                <option value="10027">T7_Axeman</option>
                <option value="10028">T8_Axeman</option>
                <option value="10201">T1_Archer</option>
                <option value="10202">T2_Archer</option>
                <option value="10203">T3_Archer</option>
                <option value="10204">T4_Archer</option>
                <option value="10205">T5_Archer</option>
                <option value="10206">T6_Archer</option>
                <option value="10207">T7_Archer</option>
                <option value="10208">T8_Archer</option>
                <option value="10211">T1_Slinger</option>
                <option value="10212">T2_Slinger</option>
                <option value="10213">T3_Slinger</option>
                <option value="10214">T4_Slinger</option>
                <option value="10215">T5_Slinger</option>
                <option value="10216">T6_Slimger</option>
                <option value="10217">T7_Slinger</option>
                <option value="10218">T8_Slinger</option>
                <option value="10225">T5_Flamer</option>
                <option value="10226">T6_Flamer</option>
                <option value="10227">T7_Flamer</option>
                <option value="10228">T8_Flamer</option>
                <option value="10231">T1_Crossbowman</option>
                <option value="10232">T2_Crossbowman</option>
                <option value="10233">T3_Crossbowman</option>
                <option value="10234">T4_Crossbowman</option>
                <option value="10235">T5_Crossbowman</option>
                <option value="10236">T6_Crossbowman</option>
                <option value="10237">T7_Crossbowman</option>
                <option value="10238">T8_Crossbowman</option>
                <option value="10301">T1_Lancer</option>
                <option value="10302">T2_Lancer</option>
                <option value="10303">T3_Lancer</option>
                <option value="10304">T4_Lancer</option>
                <option value="10305">T5_Lancer</option>
                <option value="10306">T6_Lancer</option>
                <option value="10307">T7_Lancer</option>
                <option value="10308">T8_Lancer</option>
                <option value="10311">T1_Mounted_Sword</option>
                <option value="10312">T2_Mounted_Sword</option>
                <option value="10313">T3_Mounted_Sword</option>
                <option value="10314">T4_Mounted_Sword</option>
                <option value="10315">T5_Mounted_Sword</option>
                <option value="10316">T6_Mounted_Sword</option>
                <option value="10317">T7_Mounted_Sword</option>
                <option value="10318">T8_Mounted_Sword</option>
                <option value="10321">T1_Mounted_Axeman</option>
                <option value="10322">T2_Mounted_Axeman</option>
                <option value="10323">T3_Mounted_Axeman</option>
                <option value="10324">T4_Mounted_Axeman</option>
                <option value="10325">T5_Mounted_Axeman</option>
                <option value="10326">T6_Mounted_Axeman</option>
                <option value="10327">T7_Mounted_Axeman</option>
                <option value="10328">T8_Mounted_Axeman</option>
                <option value="10505">T5_Elephant</option>
                <option value="10506">T6_Elephant</option>
                <option value="10507">T7_Elephant</option>
                <option value="10508">T8_Elephant</option>
                <option value="10601">T1_Horse_Archer</option>
                <option value="10602">T2_Horse_Archer</option>
                <option value="10603">T3_Horse_Archer</option>
                <option value="10604">T4_Horse_Archer</option>
                <option value="10605">T5_Horse_Archer</option>
                <option value="10606">T6_Horse_Archer</option>
                <option value="10607">T7_Horse_Archer</option>
                <option value="10608">T8_Horse_Archer</option>
            </select>
            What Troop would you like to add?

        </AddTroops>
        <AddMercs id="MercAdder" class="InvisableOnStart">
            <input class="NumericInput">Which Slot would you like this troop to go into?</input>
            <br>
            <select class="Dropdown" id="Trooplist">
                <option value="0"></option>
                <option value="11000">Bandits</option>
                <option value="11010">Peasent_Levy</option>
                <option value="11011">Veteran_Peasent_Levy</option>
                <option value="11020">Levy_Spear</option>
                <option value="11021">Veteran_Levy_Spear</option>
                <option value="11030">Mountain_Levy</option>
                <option value="11031">Veteran_Mountain_Levy</option>
                <option value="11040">Mercenary Swordsman</option>
                <option value="11041">Veteran_Mercenary_Swordsman</option>
                <option value="11042">Palace Guard</option>
                <option value="11050">Mercenary Axeman</option>
                <option value="11060">Mercenary Maceman</option>
                <option value="11070">Pikeman</option>
                <option value="11200">Peasent_Bowman</option>
                <option value="11210">Levy Archer</option>
                <option value="11211">Veteran_Levy_Archer</option>
                <option value="11220">Huntsman</option>
                <option value="11230">Slinger</option>
                <option value="11241">Imperial Flamer</option>
                <option value="11300">Free lance</option>
                <option value="11301">Knight</option>
                <option value="11310">Mounted Levy</option>
                <option value="11310">Mounted Palace Guard</option>
                <option value="11600">Horse_Archer</option>
                <option value="11601">Veteran_Horse_Archer</option>
                <option value="11602">Palace_Archer</option>
            </select>
            What Mercenaries would you like to add?
        </AddMercs>
        <RemoveTroops id="TroopRemoval" class="InvisableOnStart">
            <br>
            <input type="number" class="NumericInput">Which Slot would you like to remove troops from?</input>
        </RemoveTroops>
        <Questing id="QuestMenu" class="InvisableOnStart">
            <input type="number" class="NumericInput">Which Quest would you like to do?</input>
        </Questing>
        <SoliderPromotion>

        </SoliderPromotion>
        <QuestMenu>
            <text class="InvisableOnStart" id="QuestSelectorText">Which Quest Would you like to do?</text>
            <select class="Dropdown InvisableOnStart" id="QuestSelector" onchange="questText(this.value)">
                <option value="-1"></option>
                <option value="1">Quest 1</option>
                <option value="2">Quest 2</option>
                <option value="3">Quest 3</option>
                <option value="4">Quest 4</option>
                <option value="5">Quest 5</option>
                <option value="6">Quest 6</option>
                <option value="7">Quest 7</option>
                <option value="8">Quest 8</option>
                <option value="9">Quest 9</option>
                <option value="10">Quest 10</option>


            </select>
            <text class="InvisableOnStart WidthLimited" id="QuestDescriptionText"></text>

        </QuestMenu>
    </MainSelector>


    <MenuButtons class="menuButtons">
        <a href="index.html">
            <button class="indexButton">Return to Main Menu</button>
        </a>

    </MenuButtons>
    <button class="sendTX" id="sendTX" onclick="submitTX(selectAction.value)">Confirm Transaction</button>

</body>

<style>
    body {
        background-color: rgb(216, 71, 71);
    }


    .InvisableOnStart {
        display: none;
    }

    .WidthLimited {
        width: 50%;
    }

    .indexButton {
        background-color: gray;
        width: 150px;
        height: 40px;
        position: relative;
        border-radius: 12px;
        font-size: 16px;
    }

    .menuButtons {
        position: absolute;
        top: 5px;
        right: 20px;
    }

    .indexButton:hover {
        background-color: rgb(179, 165, 165);
    }

    .Dropdown {
        background-color: wheat;
        border-radius: 4px;
        font-size: 16px;
    }

    .NumericInput {
        background-color: wheat;
        border-radius: 4px;
        font-size: 16px;
    }

    .MenuButtons {
        position: absolute;
        bottom: 10px;
    }

    .sendTX {
        background-color: darkred;
        color: black;
        position: absolute;
        width: 150px;
        height: 80px;
        text-align: center;
        font-size: 16px;
        border-radius: 12px;
        bottom: 10px;
        left: 10px;
    }

    .walletConnect {
        background-color: darkred;
        position: absolute;
        right: 5%;
        width: 150px;
        height: 50px;
        border-radius: 12px;
    }
</style>